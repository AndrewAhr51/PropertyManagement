<div class="uploader">
  <h5>📤 Upload a New Document</h5>

  <!-- 🪄 Dropzone Input -->
  <document-dropzone (documentSelected)="uploadFromDropzone($event)"></document-dropzone>

  <!-- 🚨 Error Message -->
  <div *ngIf="error && !loading" class="error-message">
    ⚠️ {{ error }}
  </div>

  <!-- 📁 Document List + Pagination -->
  <div class="document-list">
    <h5 *ngIf="!loading && documents.length > 0">📄 Your Documents</h5>
    <h5 *ngIf="!loading && documents.length === 0">📄 No Documents Found</h5>

    <ul role="list">
     <li *ngFor="let doc of documents; let i = index">
        <div class="upload-card">
          <div class="doc-info">
            <strong>{{ doc.name }}</strong>
            <span class="timestamp">{{ doc.uploadedAt }}</span>
            <span
              *ngIf="uploadedDocument && doc.id === uploadedDocument.id && i === 0"
              class="just-uploaded-badge">
            </span>
          </div>

          <div class="doc-meta">
            <span class="mime-tag">{{ doc.mimeType }}</span>
            <span *ngIf="doc.isEncrypted" class="encrypted-badge">Encrypted</span>
            <span>{{ doc.referenceSummary }}</span>
          </div>

          <div class="doc-footer">
            <button (click)="download(doc)">Download</button>
          </div>
        </div>
      </li>
    </ul>

    <!-- 🔄 Pagination Controls -->
    <div *ngIf="documents.length > 0" class="pagination-controls">
      <button (click)="changePage(pageIndex - 1)" [disabled]="pageIndex === 0">← Prev</button>
      <span>Page {{ pageIndex + 1 }} of {{ totalPages() }}</span>
      <button (click)="changePage(pageIndex + 1)" [disabled]="pageIndex + 1 >= totalPages()">Next →</button>
    </div>
  </div>

  <!-- 🕸️ Empty State -->
  <div *ngIf="!loading && documents.length === 0 && !error" class="empty-state">
    📭 No documents found yet.
  </div>
</div>
