<div class="uploader">
  <h5>ğŸ“¤ Upload a New Document</h5>

  <!-- ğŸª„ Dropzone Input -->
  <document-dropzone (documentSelected)="uploadFromDropzone($event)"></document-dropzone>

  <!-- ğŸš¨ Error Message -->
  <div *ngIf="error && !loading" class="error-message">
    âš ï¸ {{ error }}
  </div>

  <!-- ğŸ“ Document List + Pagination -->
  <div class="document-list">
    <h5 *ngIf="!loading && documents.length > 0">ğŸ“„ Your Documents</h5>
    <h5 *ngIf="!loading && documents.length === 0">ğŸ“„ No Documents Found</h5>

    <ul role="list">
     <li *ngFor="let doc of documents; let i = index">
        <div class="upload-card">
          <div class="doc-info">
            <strong>{{ doc.name }}</strong>
            <span class="timestamp">{{ doc.uploadedAt }}</span>
            <span
              *ngIf="uploadedDocument && doc.id === uploadedDocument.id && i === 0"
              class="just-uploaded-badge">
            </span>
          </div>

          <div class="doc-meta">
            <span class="mime-tag">{{ doc.mimeType }}</span>
            <span *ngIf="doc.isEncrypted" class="encrypted-badge">Encrypted</span>
            <span>{{ doc.referenceSummary }}</span>
          </div>

          <div class="doc-footer">
            <button (click)="download(doc)">Download</button>
          </div>
        </div>
      </li>
    </ul>

    <!-- ğŸ”„ Pagination Controls -->
    <div *ngIf="documents.length > 0" class="pagination-controls">
      <button (click)="changePage(pageIndex - 1)" [disabled]="pageIndex === 0">â† Prev</button>
      <span>Page {{ pageIndex + 1 }} of {{ totalPages() }}</span>
      <button (click)="changePage(pageIndex + 1)" [disabled]="pageIndex + 1 >= totalPages()">Next â†’</button>
    </div>
  </div>

  <!-- ğŸ•¸ï¸ Empty State -->
  <div *ngIf="!loading && documents.length === 0 && !error" class="empty-state">
    ğŸ“­ No documents found yet.
  </div>
</div>
