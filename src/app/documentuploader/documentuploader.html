<div class="uploader">
  <h5>ğŸ“¤ Upload a New Document</h5>

  <!-- ğŸª„ Dropzone Input -->
  <document-dropzone (documentSelected)="uploadFromDropzone($event)"></document-dropzone>

  <!-- âœ… Upload Preview -->
  <div *ngIf="uploadedDocument" class="upload-card">
  <h5>âœ… Recently Uploaded</h5>
  <div class="upload-content">
    <div class="upload-header">
      <strong>{{ uploadedDocument.name }}</strong>
      <span class="status-tag">{{ uploadedDocument.status }}</span>
    </div>

    <div class="upload-details">
      <div><strong>Type:</strong> {{ uploadedDocument.documentType }}</div>
      <div><strong>MIME:</strong> {{ uploadedDocument.mimeType }}</div>
      <div><strong>Size:</strong> {{ uploadedDocument.sizeInBytes }} bytes</div>
      <div><strong>Uploaded At:</strong> {{ uploadedDocument.createDate | date:'MMM d, y h:mm a' }}</div>
      <div><strong>Checksum:</strong> {{ uploadedDocument.checksum }}</div>
      <div><strong>Encrypted:</strong> {{ uploadedDocument.isEncrypted ? 'Yes' : 'No' }}</div>
    </div>
  </div>
</div>
  <!-- ğŸ‘‡ Show only after user initiates an upload -->
  <div *ngIf="uploadedDocument && loadingDocuments" class="loading-message">
    <p>â³ Loading documents...</p>
  </div>

  <!-- ğŸš¨ Error -->
  <div *ngIf="error && !loading" class="error-message">
    âš ï¸ {{ error }}
  </div>

  <!-- ğŸ“ Documents List -->
  <div *ngIf="!loading && documents.length > 0" class="document-list">
    <h5>ğŸ“š Uploaded Documents</h5>
    <ul role="list">
      <li *ngFor="let doc of documents" class="document-item">
        <div class="doc-info">
          <strong>{{ doc.name }}</strong>
          <span class="timestamp">{{ doc.uploadedAt | date:'MMM d, y h:mm a' }}</span>
        </div>
        <div class="doc-meta">
         <span class="mime-tag">{{ doc?.mimeType || 'Unknown type' }}</span>

          <span
            *ngIf="doc.isEncrypted"
            class="encrypted-badge"
            aria-label="Encrypted Document"
            title="Encrypted Document"
          >ğŸ” Encrypted</span>

          <button (click)="download(doc)" [attr.aria-label]="'Download ' + doc.name">Download</button>
        </div>
      </li>
    </ul>
  </div>

  <!-- ğŸ•¸ï¸ Empty State -->
  <div *ngIf="!loading && documents.length === 0 && !error" class="empty-state">
    ğŸ“­ No documents found yet.
  </div>
</div>
